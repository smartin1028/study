ELK 스택(Elasticsearch + Logstash + Kibana)을 Docker로 구성하는 방법은 여러 가지가 있습니다. 공식 이미지를 활용하거나 Docker Compose를 사용하여 전체 스택을 한 번에 배포할 수 있습니다. 아래에 자세히 설명드리겠습니다.

---

### 1. **공식 Docker 이미지 활용**
Elastic에서 공식 제공하는 Docker 이미지를 사용할 수 있습니다.  
- **Elasticsearch**: [`docker.elastic.co/elasticsearch/elasticsearch`](https://www.docker.elastic.co/r/elasticsearch)  
- **Logstash**: [`docker.elastic.co/logstash/logstash`](https://www.docker.elastic.co/r/logstash)  
- **Kibana**: [`docker.elastic.co/kibana/kibana`](https://www.docker.elastic.co/r/kibana)  

#### 예시: `docker-compose.yml` 파일
```yaml
version: '3'
services:
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.12.0
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
    ports:
      - "9200:9200"
    volumes:
      - es_data:/usr/share/elasticsearch/data

  logstash:
    image: docker.elastic.co/logstash/logstash:8.12.0
    ports:
      - "5000:5000"
    volumes:
      - ./logstash.conf:/usr/share/logstash/pipeline/logstash.conf
    depends_on:
      - elasticsearch

  kibana:
    image: docker.elastic.co/kibana/kibana:8.12.0
    ports:
      - "5601:5601"
    depends_on:
      - elasticsearch

volumes:
  es_data:
    driver: local
```

#### 필요한 추가 설정
- **Logstash 파이프라인**: `logstash.conf` 파일을 생성하여 입력(Input), 필터(Filter), 출력(Output)을 정의해야 합니다.  
  예시 (`logstash.conf`):
  ```plaintext
  input {
    tcp {
      port => 5000
      codec => json
    }
  }
  output {
    elasticsearch {
      hosts => ["elasticsearch:9200"]
      index => "logs-%{+YYYY.MM.dd}"
    }
  }
  ```

---

### 2. **사전 구성된 ELK Docker 솔루션**
- **Docker Hub**에서 `elk`, `elastdocker` 등의 키워드로 검색하면 미리 구성된 ELK 스택 이미지를 찾을 수 있습니다.  
  예: [`sebp/elk`](https://hub.docker.com/r/sebp/elk)  
  ```bash
  docker run -p 5601:5601 -p 9200:9200 -p 5044:5044 -it --name elk sebp/elk
  ```
  - 이 이미지는 단일 컨테이너로 ELK 전체를 실행하지만, 프로덕션 환경에는 권장되지 않습니다.

---

### 3. **주의사항**
1. **리소스 할당**: Elasticsearch는 메모리를 많이 사용하므로 `docker-compose.yml`에서 `mem_limit` 등을 설정하는 것이 좋습니다.  
2. **보안**:  
   - Elasticsearch 8.0+는 기본적으로 보안이 활성화됩니다. `xpack.security.enabled=false`로 비활성화하거나 인증서를 구성해야 합니다.  
   - 환경 변수로 `ELASTIC_PASSWORD`를 설정할 수 있습니다.  
3. **데이터 지속성**: 볼륨 마운트 없이 컨테이너를 삭제하면 데이터가 손실됩니다.  

---

### 4. **실행 방법**
1. `docker-compose.yml` 파일을 저장한 디렉터리에서 다음 명령 실행:  
   ```bash
   docker-compose up -d
   ```
2. 접속 확인:  
   - Kibana: `http://localhost:5601`  
   - Elasticsearch: `http://localhost:9200`  

---

### 5. **프로덕션 환경 고려사항**
- **클러스터링**: Elasticsearch를 여러 노드로 구성할 경우 `discovery.seed_hosts` 설정이 필요합니다.  
- **성능 튜닝**: JVM 힙 크기 조정 (`-e ES_JAVA_OPTS="-Xms4g -Xmx4g"`)  
- **모니터링**: Metricbeat를 추가하여 ELK 자체 모니터링 가능.  

---

### 참고 자료
- [Elastic 공식 Docker 가이드](https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html)  
- [Logstash Docker 문서](https://www.elastic.co/guide/en/logstash/current/docker-config.html)  

원하는 구성에 따라 적절한 방법을 선택하시면 됩니다!