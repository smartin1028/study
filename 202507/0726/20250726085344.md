# Python에서 로그 파싱을 위한 라이브러리

Python에는 로그 파일을 파싱하고 분석하는 데 사용할 수 있는 여러 라이브러리가 있습니다. 사용 사례와 로그 형식에 따라 적합한 라이브러리를 선택할 수 있습니다.

## 주요 로그 파싱 라이브러리

### 1. **기본 로깅 모듈**
- `logging` (표준 라이브러리)
  - Python에 내장된 기본 로깅 시스템
  - 다양한 로그 레벨과 출력 포맷 지원
  ```python
  import logging
  logging.basicConfig(filename='app.log', level=logging.INFO)
  ```

### 2. **정규표현식 기반 파싱**
- `re` (표준 라이브러리)
  - 간단한 로그 패턴 매칭에 유용
  ```python
  import re
  log_line = "2023-01-01 12:00:00 ERROR Something went wrong"
  match = re.search(r'(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}) (\w+) (.*)', log_line)
  ```

### 3. **전문 로그 파싱 라이브러리**
- **`loguru`**
  - 사용하기 쉬운 고급 로깅 라이브러리
  - 색상 출력, 파일 로테이션, 예외 처리 등 다양한 기능
  ```python
  from loguru import logger
  logger.add("file_{time}.log", rotation="500 MB")
  ```

- **`structlog`**
  - 구조화된 로깅을 위한 라이브러리
  - JSON 형식 로그 출력에 적합
  ```python
  from structlog import get_logger
  logger = get_logger()
  logger.info("user_login", user_id=123, ip="192.168.1.1")
  ```

- **`pygtail`**
  - 로그 파일의 새 줄만 읽을 때 유용 (tail -f 기능 구현)
  ```python
  from pygtail import Pygtail
  for line in Pygtail("some.log"):
      print(line)
  ```

- **`grok` (python-grok 패키지)**
  - 로그스태시 같은 Grok 패턴 지원
  - 복잡한 로그 형식 파싱에 적합
  ```python
  from grok import Grok
  pattern = '%{TIMESTAMP_ISO8601:timestamp} %{LOGLEVEL:level} %{GREEDYDATA:message}'
  grok = Grok(pattern)
  print(grok.match(log_line))
  ```

### 4. **시스템 로그 파싱**
- **`systemd.journal`**
  - systemd 저널 로그 읽기 (Linux 시스템에서)
  ```python
  from systemd import journal
  j = journal.Reader()
  j.seek_tail()
  ```

### 5. **웹 서버 로그 파싱**
- **`pylogparser`**
  - Apache, Nginx 등의 웹 서버 로그 파싱
  ```python
  from pylogparser import LogParser
  parser = LogParser(format='nginx')
  parsed = parser.parse(line)
  ```

## 선택 가이드

1. **간단한 로그**: `logging` 모듈 + `re` 정규표현식
2. **구조화된 로그**: `structlog` 또는 `loguru`
3. **복잡한 로그 형식**: `grok` 또는 `pylogparser`
4. **실시간 로그 모니터링**: `pygtail`
5. **시스템 로그**: `systemd.journal`

로그의 복잡성과 필요한 기능에 따라 적절한 라이브러리를 선택하시면 됩니다.