# H2 데이터베이스 테이블 생성 SQL

다음은 요청하신 사항을 반영한 H2 데이터베이스 테이블 생성 SQL입니다. 파일 정보, 유니크 키, 라인 정보, 내용, 내용 타입, 그리고 파일 내용 내의 시간 정보를 저장할 수 있는 구조로 설계했습니다.

```sql
CREATE TABLE file_contents (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    file_name VARCHAR(255) NOT NULL COMMENT '파일명',
    unique_key VARCHAR(255) NOT NULL UNIQUE COMMENT '유니크 키 (파일명+라인번호 등 조합 가능)',
    line_start INT NOT NULL COMMENT '라인 시작 정보',
    line_end INT NOT NULL COMMENT '라인 끝 정보',
    content TEXT COMMENT '내용',
    content_type VARCHAR(50) COMMENT '내용타입 정보 (예: text, code, log 등)',
    time_info VARCHAR(100) COMMENT '파일 내용에서 추출된 시간정보',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '레코드 생성 시간',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '레코드 수정 시간',
    
    INDEX idx_file_name (file_name),
    INDEX idx_unique_key (unique_key),
    INDEX idx_time_info (time_info)
) COMMENT '파일 내용 정보 저장 테이블';
```

## 테이블 구조 설명

1. **file_name**: 파일의 이름을 저장 (255자까지)
2. **unique_key**: 파일 내에서 유니크한 식별자 (예: "파일명_시작라인" 조합 등)
3. **line_start**: 내용의 시작 라인 번호
4. **line_end**: 내용의 끝 라인 번호
5. **content**: 실제 내용 (TEXT 타입으로 긴 내용 저장 가능)
6. **content_type**: 내용의 유형 (텍스트, 코드, 로그 등 분류)
7. **time_info**: 파일 내용에서 추출된 시간 정보 (형식은 자유롭게 사용 가능)
8. **created_at**: 레코드 생성 시간 (자동 기록)
9. **updated_at**: 레코드 수정 시간 (자동 갱신)

## 추가 고려사항

1. **유니크 키 생성 전략**: `unique_key` 컬럼은 파일명과 라인번호를 조합하여 생성할 수 있습니다.
   예: `CONCAT(file_name, '_', line_start)`

2. **시간 정보 파싱**: `time_info` 컬럼에 저장할 시간 정보는 파일 내용에서 정규표현식 등으로 추출 가능합니다.

3. **성능 최적화**: 대용량 데이터를 고려하여 인덱스를 추가했습니다.

4. **확장성**: 필요에 따라 추가 컬럼을 포함시킬 수 있습니다.

이 테이블 구조는 로그 파일 분석, 소스 코드 관리, 문서 처리 등 다양한 용도로 활용할 수 있습니다.